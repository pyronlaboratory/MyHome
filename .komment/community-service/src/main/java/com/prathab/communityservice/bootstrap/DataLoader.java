{"name":"DataLoader.java","path":"community-service/src/main/java/com/prathab/communityservice/bootstrap/DataLoader.java","content":{"structured":{"description":"A `DataLoader` class that loads data into a Community and CommunityAdmin repository. The class creates a new community with a default name, district, and ID, and persists it to the repository. It then creates a new CommunityAdmin object and links it to the saved community using its `getCommunities()` method. Finally, the code updates the saved community with the newly created admin by adding it to its `Admins` list and saving the changes to the repository.","image":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.43.0 (0)\n -->\n<!-- Title: com.prathab.communityservice.bootstrap.DataLoader Pages: 1 -->\n<svg width=\"232pt\" height=\"93pt\"\n viewBox=\"0.00 0.00 232.00 93.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 89)\">\n<title>com.prathab.communityservice.bootstrap.DataLoader</title>\n<!-- Node1 -->\n<g id=\"Node000001\" class=\"node\">\n<title>Node1</title>\n<g id=\"a_Node000001\"><a xlink:title=\" \">\n<polygon fill=\"#999999\" stroke=\"#666666\" points=\"224,-30 0,-30 0,0 224,0 224,-30\"/>\n<text text-anchor=\"start\" x=\"8\" y=\"-18\" font-family=\"Helvetica,sans-Serif\" font-size=\"10.00\">com.prathab.communityservice.bootstrap.</text>\n<text text-anchor=\"middle\" x=\"112\" y=\"-7\" font-family=\"Helvetica,sans-Serif\" font-size=\"10.00\">DataLoader</text>\n</a>\n</g>\n</g>\n<!-- Node2 -->\n<g id=\"Node000002\" class=\"node\">\n<title>Node2</title>\n<g id=\"a_Node000002\"><a xlink:title=\" \">\n<polygon fill=\"white\" stroke=\"#666666\" points=\"173,-85 51,-85 51,-66 173,-66 173,-85\"/>\n<text text-anchor=\"middle\" x=\"112\" y=\"-73\" font-family=\"Helvetica,sans-Serif\" font-size=\"10.00\">CommandLineRunner</text>\n</a>\n</g>\n</g>\n<!-- Node2&#45;&gt;Node1 -->\n<g id=\"edge1_Node000001_Node000002\" class=\"edge\">\n<title>Node2&#45;&gt;Node1</title>\n<g id=\"a_edge1_Node000001_Node000002\"><a xlink:title=\" \">\n<path fill=\"none\" stroke=\"#63b8ff\" d=\"M112,-55.65C112,-47.36 112,-37.78 112,-30.11\"/>\n<polygon fill=\"#63b8ff\" stroke=\"#63b8ff\" points=\"108.5,-55.87 112,-65.87 115.5,-55.87 108.5,-55.87\"/>\n</a>\n</g>\n</g>\n</g>\n</svg>\n","items":[{"id":"6ce0ef72-bb49-51bb-6d41-1cc1e58dddee","ancestors":[],"type":"function","description":"TODO","name":"DataLoader","code":"@Component\npublic class DataLoader implements CommandLineRunner {\n  private final CommunityRepository communityRepository;\n  private final CommunityAdminRepository communityAdminRepository;\n\n  public DataLoader(\n      CommunityRepository communityRepository,\n      CommunityAdminRepository communityAdminRepository) {\n    this.communityRepository = communityRepository;\n    this.communityAdminRepository = communityAdminRepository;\n  }\n\n  @Override public void run(String... args) throws Exception {\n    loadData();\n  }\n\n  private void loadData() {\n    // Persist community to repo\n    var communityName = \"MyHome default community\";\n    var communityDistrict = \"MyHome default community district\";\n    var communityId = \"default-community-id-for-testing\";\n    var community = new Community();\n    community.setName(communityName);\n    community.setDistrict(communityDistrict);\n    community.setCommunityId(communityId);\n    var savedCommunity = communityRepository.save(community);\n\n    // Persist admin to repo\n    var communityAdmin = new CommunityAdmin();\n    var adminId = UUID.randomUUID().toString();\n    communityAdmin.setAdminId(adminId);\n    communityAdmin.getCommunities().add(savedCommunity);\n    var savedCommunityAdmin = communityAdminRepository.save(communityAdmin);\n\n    // Update community with the saved admin\n    savedCommunity.getAdmins().add(savedCommunityAdmin);\n    communityRepository.save(savedCommunity);\n  }\n}","location":{"start":27,"insert":27,"offset":" ","indent":0},"item_type":"class","length":39},{"id":"188ec28f-242d-80b8-b54e-5ac11e5d729b","ancestors":["6ce0ef72-bb49-51bb-6d41-1cc1e58dddee"],"type":"function","description":"loads data from an external source.","params":[],"usage":{"language":"java","code":"@Override public void run(String... args) throws Exception {\n  loadData();\n}\n","description":"\nIn this example, the loadData() method is called to load data into the application's repository. The run() method overrides the CommandLineRunner interface's run() method and calls loadData() when it is executed with an array of String arguments."},"name":"run","code":"@Override public void run(String... args) throws Exception {\n    loadData();\n  }","location":{"start":39,"insert":39,"offset":" ","indent":2},"item_type":"method","length":3},{"id":"81139272-cee2-a69b-d14a-b59aaffdb45e","ancestors":["6ce0ef72-bb49-51bb-6d41-1cc1e58dddee"],"type":"function","description":"persists a community and an admin to the repository, updates the community with the saved admin, and saves both entities to the database.","params":[],"usage":{"language":"java","code":"public class Main {\n    public static void main(String[] args) {\n        DataLoader loader = new DataLoader();\n        loader.loadData();\n    }\n}\n","description":""},"name":"loadData","code":"private void loadData() {\n    // Persist community to repo\n    var communityName = \"MyHome default community\";\n    var communityDistrict = \"MyHome default community district\";\n    var communityId = \"default-community-id-for-testing\";\n    var community = new Community();\n    community.setName(communityName);\n    community.setDistrict(communityDistrict);\n    community.setCommunityId(communityId);\n    var savedCommunity = communityRepository.save(community);\n\n    // Persist admin to repo\n    var communityAdmin = new CommunityAdmin();\n    var adminId = UUID.randomUUID().toString();\n    communityAdmin.setAdminId(adminId);\n    communityAdmin.getCommunities().add(savedCommunity);\n    var savedCommunityAdmin = communityAdminRepository.save(communityAdmin);\n\n    // Update community with the saved admin\n    savedCommunity.getAdmins().add(savedCommunityAdmin);\n    communityRepository.save(savedCommunity);\n  }","location":{"start":43,"insert":43,"offset":" ","indent":2},"item_type":"method","length":22}]}}}